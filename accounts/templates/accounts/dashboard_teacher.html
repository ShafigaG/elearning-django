{% extends 'accounts/base.html' %}
{% block title %}Teacher Dashboard{% endblock %}

{% block content %}
<h2>My Courses</h2>
<table class="table table-striped">
    <thead>
        <tr>
            <th>Course name</th>
            <th>Description</th>
            <th>Operations</th>
        </tr>
    </thead>
    <tbody>
        {% for course in courses %}
        <tr>
            <td>{{ course.title }}</td>
            <td>{{ course.description }}</td>
            <td>
                <a href="{% url 'add_exam' course.id %}" class="btn btn-sm btn-primary">Add an Exam</a>
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="3">No courses yet.</td></tr>
        {% endfor %}
    </tbody>
</table>

<hr>
{% for course in courses %}
  <h4>{{ course.title }}</h4>
  <p>{{ course.description }}</p>

  <h5>Exams:</h5>
  <ul>
    {% for exam in course.exam_set.all %}
      <li>{{ exam.title }} - {{ exam.description }}</li>
    {% empty %}
      <li>No exams yet.</li>
    {% endfor %}
  </ul>

  <a href="{% url 'add_exam' course.id %}" class="btn btn-sm btn-outline-primary">Add an exam</a>
  <hr>
{% endfor %}

<h3>Add a new course</h3>
<form method="post" action="{% url 'add_course' %}">
    {% csrf_token %}
    <input type="text" name="title" class="form-control mb-2" placeholder="Course title" required>
    <textarea name="description" class="form-control mb-2" placeholder="Description" required></textarea>
    <button class="btn btn-success">Add</button>
</form>
{% endblock %}
