{% extends 'accounts/base.html' %}
{% block title %}Öğretmen Paneli{% endblock %}

{% block content %}
<h2>Derslerim</h2>
<table class="table table-striped">
    <thead>
        <tr>
            <th>Ders Adı</th>
            <th>Açıklama</th>
            <th>İşlemler</th>
        </tr>
    </thead>
    <tbody>
        {% for course in courses %}
        <tr>
            <td>{{ course.title }}</td>
            <td>{{ course.description }}</td>
            <td>
                <a href="{% url 'add_exam' course.id %}" class="btn btn-sm btn-primary">Sınav Ekle</a>
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="3">Henüz ders yok.</td></tr>
        {% endfor %}
    </tbody>
</table>

<hr>
{% for course in courses %}
  <h4>{{ course.title }}</h4>
  <p>{{ course.description }}</p>

  <h5>Sınavlar:</h5>
  <ul>
    {% for exam in course.exam_set.all %}
      <li>{{ exam.title }} - {{ exam.description }}</li>
    {% empty %}
      <li>Henüz sınav yok.</li>
    {% endfor %}
  </ul>

  <a href="{% url 'add_exam' course.id %}" class="btn btn-sm btn-outline-primary">Sınav Ekle</a>
  <hr>
{% endfor %}

<h3>Yeni Ders Ekle</h3>
<form method="post" action="{% url 'add_course' %}">
    {% csrf_token %}
    <input type="text" name="title" class="form-control mb-2" placeholder="Ders Başlığı" required>
    <textarea name="description" class="form-control mb-2" placeholder="Açıklama" required></textarea>
    <button class="btn btn-success">Ekle</button>
</form>
{% endblock %}
